{"ast":null,"code":"\"use strict\";var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}}return t;};return __assign.apply(this,arguments);};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator[\"throw\"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),\"throw\":verb(1),\"return\":verb(2)},typeof Symbol===\"function\"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError(\"Generator is already executing.\");while(_){try{if(f=1,y&&(t=op[0]&2?y[\"return\"]:op[0]?y[\"throw\"]||((t=y[\"return\"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};exports.__esModule=true;var jsx_runtime_1=require(\"react/jsx-runtime\");require(\"../css/Form.css\");require(\"../css/ListTransactions.css\");var react_1=require(\"react\");var react_2=require(\"react\");var axios_1=require(\"axios\");var parse=require('html-react-parser');var ListTransactions=function ListTransactions(){//const [tabella, setTabella] = useState('<tr><td></td><td></td><td></td></tr>');\nvar _a=(0,react_2.useState)(''),tabella=_a[0],setTabella=_a[1];var url=\"http://localhost:80/listTransactions\";(0,react_1.useEffect)(function(){return __awaiter(void 0,void 0,void 0,function(){var posizioneValuta,valuta,posizioneData,data,corpo,risposta,oggetto;return __generator(this,function(_a){switch(_a.label){case 0:posizioneValuta=window.location.href.indexOf('valuta=');valuta='';if(posizioneValuta!=-1){valuta=window.location.href.slice(posizioneValuta+7,posizioneValuta+5+5);}posizioneData=window.location.href.indexOf('data=');data='';if(posizioneData!=-1){data=window.location.href.slice(posizioneData+5,posizioneData+5+10);}corpo={valuta:valuta,data:data};return[4/*yield*/,axios_1[\"default\"].post(url,corpo)];case 1:risposta=_a.sent();oggetto=JSON.parse(risposta.data);if(oggetto[\"ridirezione\"]){alert('Sessione scaduta');window.location.href='http://localhost:3000/';}else{if(oggetto[\"isTuttoOk\"]){if(oggetto[\"listaTransizioni\"]!='[]'){creaTabella(oggetto[\"listaTransizioni\"]);//creo la tabella \n}}else{alert(oggetto[\"messaggio\"]);}}return[2/*return*/];}});});});function creaTabella(oggetto){var lista=JSON.parse(oggetto);var nuovaTabella='';var valutaComprata;var valutaSpesa;for(var i=0;i<lista.length;i++){if(i%2==1)//guardo se devo fare lo sfondo bianco o grigio\n{nuovaTabella=nuovaTabella+'<tr>';}else{nuovaTabella=nuovaTabella+'<tr className = \"dispari\">';}if(lista[i][\"valuta_comprata\"]=='USD')//setto le valute\n{valutaComprata='$';valutaSpesa='€';}else{valutaComprata='€';valutaSpesa='$';}nuovaTabella=nuovaTabella+'<td>'+lista[i][\"quantita_spesa\"].toFixed(2)+\" \"+valutaSpesa+\"</td>\";//spesa\nnuovaTabella=nuovaTabella+'<td>'+lista[i][\"quantita_comprata\"].toFixed(2)+\" \"+valutaComprata+\"</td>\";//comprata\nnuovaTabella=nuovaTabella+'<td>'+giraData(lista[i][\"data\"])+\"</td>\";//data\n//nuovaTabella = nuovaTabella + '<td>' + lista[i][\"data\"] + \"</td>\"; //data\nnuovaTabella=nuovaTabella+'</tr>';}setTabella(nuovaTabella);}function giraData(data){return data.slice(8,10)+'-'+data.slice(5,7)+'-'+data.slice(0,4);}var handleLoginForm=function handleLoginForm(e){return __awaiter(void 0,void 0,void 0,function(){var data,valuta,nuovaQuery;return __generator(this,function(_a){e.preventDefault();data=e.target.data.value;valuta=e.target.valuta.value;nuovaQuery='http://localhost:3000/listTransactions';if(data!=''||valuta!=''){nuovaQuery=nuovaQuery+'?';if(data!=''&&valuta!=''){nuovaQuery=nuovaQuery+'data='+data+'&valuta='+valuta;}else if(data!=''){nuovaQuery=nuovaQuery+'data='+data;}else{nuovaQuery=nuovaQuery+'valuta='+valuta;}}window.location.href=nuovaQuery;return[2/*return*/];});});};return(0,jsx_runtime_1.jsxs)(\"div\",__assign({className:\"listTransactions\"},{children:[(0,jsx_runtime_1.jsx)(\"h1\",{children:\"Storico delle transizioni\"},void 0),(0,jsx_runtime_1.jsxs)(\"table\",{children:[(0,jsx_runtime_1.jsx)(\"thead\",{children:(0,jsx_runtime_1.jsxs)(\"tr\",{children:[(0,jsx_runtime_1.jsx)(\"th\",{children:\"Quantita Spesa\"},void 0),(0,jsx_runtime_1.jsx)(\"th\",{children:\"Quantita Comprata\"},void 0),(0,jsx_runtime_1.jsx)(\"th\",{children:\"Data\"},void 0)]},void 0)},void 0),(0,jsx_runtime_1.jsx)(\"tbody\",{children:parse(tabella)/* creo la tabella*/},void 0)]},void 0),(0,jsx_runtime_1.jsx)(\"h2\",{children:\"Filtri\"},void 0),(0,jsx_runtime_1.jsxs)(\"form\",__assign({id:\"form\",onSubmit:handleLoginForm},{children:[(0,jsx_runtime_1.jsx)(\"input\",{type:\"date\",id:\"data\",name:\"data\"},void 0),\" \",(0,jsx_runtime_1.jsx)(\"br\",{},void 0),\" \",(0,jsx_runtime_1.jsx)(\"br\",{},void 0),(0,jsx_runtime_1.jsxs)(\"select\",__assign({id:\"valuta\",name:\"valuta\",form:'form'},{children:[(0,jsx_runtime_1.jsx)(\"option\",__assign({value:\"\"},{children:\"Nessuna\"}),void 0),(0,jsx_runtime_1.jsx)(\"option\",__assign({value:\"USD\"},{children:\"USD\"}),void 0),(0,jsx_runtime_1.jsx)(\"option\",__assign({value:\"EUR\"},{children:\"EUR\"}),void 0)]}),void 0),\" \",(0,jsx_runtime_1.jsx)(\"br\",{},void 0),\" \",(0,jsx_runtime_1.jsx)(\"br\",{},void 0),(0,jsx_runtime_1.jsx)(\"input\",{id:'bottoneInterno',type:'submit'},void 0)]}),void 0)]}),void 0);};exports[\"default\"]=ListTransactions;","map":{"version":3,"sources":["/Volumes/HD Docum./flem/progetto sf/exchange2/frontend_exchange/src/build/ListTransactions.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","exports","__esModule","jsx_runtime_1","require","react_1","react_2","axios_1","parse","ListTransactions","_a","useState","tabella","setTabella","url","useEffect","posizioneValuta","valuta","posizioneData","data","corpo","risposta","oggetto","window","location","href","indexOf","slice","post","JSON","alert","creaTabella","lista","nuovaTabella","valutaComprata","valutaSpesa","toFixed","giraData","handleLoginForm","nuovaQuery","preventDefault","target","jsxs","className","children","jsx","id","onSubmit","type","name","form"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\nrequire(\"../css/Form.css\");\nrequire(\"../css/ListTransactions.css\");\nvar react_1 = require(\"react\");\nvar react_2 = require(\"react\");\nvar axios_1 = require(\"axios\");\nvar parse = require('html-react-parser');\nvar ListTransactions = function () {\n    //const [tabella, setTabella] = useState('<tr><td></td><td></td><td></td></tr>');\n    var _a = (0, react_2.useState)(''), tabella = _a[0], setTabella = _a[1];\n    var url = \"http://localhost:80/listTransactions\";\n    (0, react_1.useEffect)(function () { return __awaiter(void 0, void 0, void 0, function () {\n        var posizioneValuta, valuta, posizioneData, data, corpo, risposta, oggetto;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    posizioneValuta = window.location.href.indexOf('valuta=');\n                    valuta = '';\n                    if (posizioneValuta != -1) {\n                        valuta = window.location.href.slice(posizioneValuta + 7, posizioneValuta + 5 + 5);\n                    }\n                    posizioneData = window.location.href.indexOf('data=');\n                    data = '';\n                    if (posizioneData != -1) {\n                        data = window.location.href.slice(posizioneData + 5, posizioneData + 5 + 10);\n                    }\n                    corpo = {\n                        valuta: valuta,\n                        data: data\n                    };\n                    return [4 /*yield*/, axios_1[\"default\"].post(url, corpo)];\n                case 1:\n                    risposta = _a.sent();\n                    oggetto = JSON.parse(risposta.data);\n                    if (oggetto[\"ridirezione\"]) {\n                        alert('Sessione scaduta');\n                        window.location.href = 'http://localhost:3000/';\n                    }\n                    else {\n                        if (oggetto[\"isTuttoOk\"]) {\n                            if (oggetto[\"listaTransizioni\"] != '[]') {\n                                creaTabella(oggetto[\"listaTransizioni\"]); //creo la tabella \n                            }\n                        }\n                        else {\n                            alert(oggetto[\"messaggio\"]);\n                        }\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    }); });\n    function creaTabella(oggetto) {\n        var lista = JSON.parse(oggetto);\n        var nuovaTabella = '';\n        var valutaComprata;\n        var valutaSpesa;\n        for (var i = 0; i < lista.length; i++) {\n            if (i % 2 == 1) //guardo se devo fare lo sfondo bianco o grigio\n             {\n                nuovaTabella = nuovaTabella + '<tr>';\n            }\n            else {\n                nuovaTabella = nuovaTabella + '<tr className = \"dispari\">';\n            }\n            if (lista[i][\"valuta_comprata\"] == 'USD') //setto le valute\n             {\n                valutaComprata = '$';\n                valutaSpesa = '€';\n            }\n            else {\n                valutaComprata = '€';\n                valutaSpesa = '$';\n            }\n            nuovaTabella = nuovaTabella + '<td>' + lista[i][\"quantita_spesa\"].toFixed(2) + \" \" + valutaSpesa + \"</td>\"; //spesa\n            nuovaTabella = nuovaTabella + '<td>' + lista[i][\"quantita_comprata\"].toFixed(2) + \" \" + valutaComprata + \"</td>\"; //comprata\n            nuovaTabella = nuovaTabella + '<td>' + giraData(lista[i][\"data\"]) + \"</td>\"; //data\n            //nuovaTabella = nuovaTabella + '<td>' + lista[i][\"data\"] + \"</td>\"; //data\n            nuovaTabella = nuovaTabella + '</tr>';\n        }\n        setTabella(nuovaTabella);\n    }\n    function giraData(data) {\n        return data.slice(8, 10) + '-' + data.slice(5, 7) + '-' + data.slice(0, 4);\n    }\n    var handleLoginForm = function (e) { return __awaiter(void 0, void 0, void 0, function () {\n        var data, valuta, nuovaQuery;\n        return __generator(this, function (_a) {\n            e.preventDefault();\n            data = e.target.data.value;\n            valuta = e.target.valuta.value;\n            nuovaQuery = 'http://localhost:3000/listTransactions';\n            if (data != '' || valuta != '') {\n                nuovaQuery = nuovaQuery + '?';\n                if (data != '' && valuta != '') {\n                    nuovaQuery = nuovaQuery + 'data=' + data + '&valuta=' + valuta;\n                }\n                else if (data != '') {\n                    nuovaQuery = nuovaQuery + 'data=' + data;\n                }\n                else {\n                    nuovaQuery = nuovaQuery + 'valuta=' + valuta;\n                }\n            }\n            window.location.href = nuovaQuery;\n            return [2 /*return*/];\n        });\n    }); };\n    return ((0, jsx_runtime_1.jsxs)(\"div\", __assign({ className: \"listTransactions\" }, { children: [(0, jsx_runtime_1.jsx)(\"h1\", { children: \"Storico delle transizioni\" }, void 0), (0, jsx_runtime_1.jsxs)(\"table\", { children: [(0, jsx_runtime_1.jsx)(\"thead\", { children: (0, jsx_runtime_1.jsxs)(\"tr\", { children: [(0, jsx_runtime_1.jsx)(\"th\", { children: \"Quantita Spesa\" }, void 0), (0, jsx_runtime_1.jsx)(\"th\", { children: \"Quantita Comprata\" }, void 0), (0, jsx_runtime_1.jsx)(\"th\", { children: \"Data\" }, void 0)] }, void 0) }, void 0), (0, jsx_runtime_1.jsx)(\"tbody\", { children: parse(tabella) /* creo la tabella*/ }, void 0)] }, void 0), (0, jsx_runtime_1.jsx)(\"h2\", { children: \"Filtri\" }, void 0), (0, jsx_runtime_1.jsxs)(\"form\", __assign({ id: \"form\", onSubmit: handleLoginForm }, { children: [(0, jsx_runtime_1.jsx)(\"input\", { type: \"date\", id: \"data\", name: \"data\" }, void 0), \" \", (0, jsx_runtime_1.jsx)(\"br\", {}, void 0), \" \", (0, jsx_runtime_1.jsx)(\"br\", {}, void 0), (0, jsx_runtime_1.jsxs)(\"select\", __assign({ id: \"valuta\", name: \"valuta\", form: 'form' }, { children: [(0, jsx_runtime_1.jsx)(\"option\", __assign({ value: \"\" }, { children: \"Nessuna\" }), void 0), (0, jsx_runtime_1.jsx)(\"option\", __assign({ value: \"USD\" }, { children: \"USD\" }), void 0), (0, jsx_runtime_1.jsx)(\"option\", __assign({ value: \"EUR\" }, { children: \"EUR\" }), void 0)] }), void 0), \" \", (0, jsx_runtime_1.jsx)(\"br\", {}, void 0), \" \", (0, jsx_runtime_1.jsx)(\"br\", {}, void 0), (0, jsx_runtime_1.jsx)(\"input\", { id: 'bottoneInterno', type: 'submit' }, void 0)] }), void 0)] }), void 0));\n};\nexports[\"default\"] = ListTransactions;\n"]},"metadata":{},"sourceType":"module"}