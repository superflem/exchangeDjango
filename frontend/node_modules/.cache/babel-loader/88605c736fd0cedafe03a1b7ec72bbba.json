{"ast":null,"code":"var _jsxFileName = \"/Users/giuseppe/Desktop/progettoAlexCaraffi/frontend/src/js/Login.js\",\n    _s = $RefreshSig$();\n\nimport { sha3_512 } from 'js-sha3';\nimport { useRef } from 'react';\nimport '../css/Form.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.withCredentials = true;\nexport const controllaEmail = function () {\n  let input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  return input.includes(\"@\");\n}; // controlla che l'input della mail abbia la chiocciola\n\nexport const controllaPassword = function () {\n  let input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  return input.length === 128;\n}; // controlla che l'input della mail abbia la chiocciola\n\nconst Login = () => {\n  _s();\n\n  //servono per inviare i dati nel form\n  const emailInput = useRef();\n  const passwordInput = useRef();\n\n  const handleLoginForm = async e => {\n    e.preventDefault(); //evita di ricaricare la pagina\n\n    const url = \"http://localhost:8000/login/\";\n    const email = emailInput.current.value;\n    let password = passwordInput.current.value;\n    password = sha3_512(password); //cifro la password\n    // controllo la email\n\n    if (!controllaEmail(email)) alert(\"La email non è valida\");\n    const corpo = {\n      email: email,\n      password: password,\n      withCredentials: true\n    }; //creo l'oggetto json da inviare al server\n    //INVIO I DATI\n\n    const risposta = await axios.post(url, corpo);\n    const oggetto = risposta.data;\n    if (!oggetto[\"isTuttoOk\"]) //se c'è un errore lo comunico, altrimenti procedo\n      alert(oggetto[\"messaggio\"]);else {\n      //se avviene con successo il login\n      alert(\"Autenticazione avvenuta\");\n      const link = window.location.href + 'home'; //rimando alla pagina principale di login\n\n      window.location.replace(link); //axios.post(\"http://localhost:80/ciaoo\", {email: email, password: password, withCredentials: true});\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"divLogin\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleLoginForm,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"testo\",\n        type: \"text\",\n        ref: emailInput,\n        id: \"email\",\n        name: \"email\",\n        placeholder: \"Email\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 127\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 134\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"testo\",\n        type: \"password\",\n        ref: passwordInput,\n        id: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 143\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 150\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"bottone\",\n        type: \"submit\",\n        children: \" Invia\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"5LPpMnT5s4OrxCzjYmKtZYFTVeY=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/giuseppe/Desktop/progettoAlexCaraffi/frontend/src/js/Login.js"],"names":["sha3_512","useRef","axios","defaults","withCredentials","controllaEmail","input","includes","controllaPassword","length","Login","emailInput","passwordInput","handleLoginForm","e","preventDefault","url","email","current","value","password","alert","corpo","risposta","post","oggetto","data","link","window","location","href","replace"],"mappings":"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","sourcesContent":["import { sha3_512 } from 'js-sha3';\nimport { useRef } from 'react';\nimport '../css/Form.css';\nimport axios from 'axios';\naxios.defaults.withCredentials = true;\n\nexport const controllaEmail = (input = \"\") => input.includes(\"@\"); // controlla che l'input della mail abbia la chiocciola\nexport const controllaPassword = (input = \"\") => input.length === 128; // controlla che l'input della mail abbia la chiocciola\n\nconst Login = () => {\n    //servono per inviare i dati nel form\n    const emailInput = useRef();\n    const passwordInput = useRef();\n\n    const handleLoginForm = async (e) => {\n        e.preventDefault(); //evita di ricaricare la pagina\n        const url = \"http://localhost:8000/login/\";\n        const email = emailInput.current.value;\n        let password = passwordInput.current.value;\n        password = sha3_512(password); //cifro la password\n\n        // controllo la email\n        if (!controllaEmail(email))\n            alert(\"La email non è valida\");\n\n\n        const corpo = {email: email, password: password, withCredentials: true}; //creo l'oggetto json da inviare al server\n        \n        //INVIO I DATI\n        const risposta = await axios.post(url, corpo);\n        const oggetto = risposta.data;\n        if (!oggetto[\"isTuttoOk\"]) //se c'è un errore lo comunico, altrimenti procedo\n            alert(oggetto[\"messaggio\"]);\n        \n        else { //se avviene con successo il login\n            alert(\"Autenticazione avvenuta\");\n            const link = window.location.href + 'home'; //rimando alla pagina principale di login\n            window.location.replace(link);\n            //axios.post(\"http://localhost:80/ciaoo\", {email: email, password: password, withCredentials: true});\n        }\n    }\n\n    return (\n        <div className=\"divLogin\">\n            <h1>Login</h1>\n\n            <form onSubmit = {handleLoginForm}>\n                <input className='testo' type='text' ref={emailInput} id='email' name='email' placeholder='Email' required /> <br /> <br />\n                <input className='testo' type='password' ref={passwordInput} id='password' name='password' placeholder='Password' required /> <br /> <br />\n                <button id='bottone' type='submit'> Invia</button>\n            </form>\n        </div> \n    );\n}\n \nexport default Login;"]},"metadata":{},"sourceType":"module"}